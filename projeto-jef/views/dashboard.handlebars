<div class="dashboard-container ideas-container">
  <header class="dashboard-header">
    <h1 class="welcome-title">Bem-vindo(a), {{user.name}}!</h1>
    <a class="logout-btn btn btn-secondary" href="/auth/logout">Sair</a>
  </header>

  {{#if messages.success}}
    <div class="flash-messages">
      <div class="success">{{messages.success}}</div>
    </div>
  {{/if}}
  {{#if messages.error}}
    <div class="flash-messages">
      <div class="error">{{messages.error}}</div>
    </div>
  {{/if}}

  <section class="dashboard-section ideas-list-section">
    <div class="section-header">
      <h2 class="section-title">Ideias Inovadoras</h2>
      <a href="/ideias/nova" class="add-btn btn">+ Nova Ideia</a>
    </div>

    <ul class="ideas-list">
      {{#each ideas}}
        <li>
          <h3><a href="/ideias/{{this.id}}">{{this.title}}</a></h3>
          <p>
            {{this.description}}
          </p>
          <small>Por {{this.User.name}}</small>
          <div class="idea-actions">
            
            <form action="/ideias/votar" method="POST" style="display: inline;">
              <input type="hidden" name="ideaId" value="{{this.id}}"> 
              <input type="hidden" name="_csrf" value="{{../csrfToken}}" />
              <button 
                type="submit" 
                name="type" 
                value="UP" 
                class="btn btn-secondary {{#if (eq this.userVoteType 'UP')}}voto-ativo{{/if}}" 
              >
                üëç Votar ({{this.totalUpvotes}})
              </button>
            </form>

            <form action="/ideias/votar" method="POST" style="display: inline;">
              <input type="hidden" name="ideaId" value="{{this.id}}">
              <input type="hidden" name="_csrf" value="{{../csrfToken}}" />
              <button 
                type="submit" 
                name="type" 
                value="DOWN" 
                class="btn btn-secondary {{#if (eq this.userVoteType 'DOWN')}}voto-ativo{{/if}}" 
              >
                üëé Votar ({{this.totalDownvotes}})
              </button>
            </form>

            {{#if (eq this.owner_id ../user.id)}}
              <a href="/ideias/editar/{{this.id}}" class="btn">Editar</a>
              <form action="/ideias/deletar/{{this.id}}" method="POST" style="display: inline;">
                <input type="hidden" name="_csrf" value="{{../csrfToken}}" />
                <button type="submit" class="btn btn-danger">Deletar</button>
              </form>
            {{/if}}
          </div>
        </li>
      {{else}}
         <p class="no-ideas-message">Nenhuma ideia inovadora cadastrada ainda. Seja o primeiro!</p>
      {{/each}}
    </ul>
  </section>
</div>